/*
 *
 * Copyright 2014 Tony Quetano under the terms of the MIT
 * license found at https://github.com/planttheidea/sup/MIT_License.txt
 *
 * sup.js - A simple publish / subscribe library without dependencies
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
*/
(function(k,m,n){function f(a){if(0<d[a])for(var b in e)if(e[b])for(var c=e[b].length;c--;)e[b][c].token!==d[a]||e[b][c].persistent||(delete d[a],e[b].splice(c,1))}function g(a,b,c,d,g){"array"!==h(e[a])&&(e[a]=[]);d&&(c=function(){c.call();f(g)});e[a].push({token:b,func:c})}var e={},d={},l=-1,h=function(a){return Object.prototype.toString.call(a).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};k.sup={publish:function(a){var b=a.data||{},c,d;if(!e[a.topic])return!1;for(d=(c=e[a.topic])?c.length:
0;d--;)c[d].func(b,a.topic);return this},subscribe:function(a){if("string"==h(a.name)){var b=h(unsubscribeObj.topic);d[a.name]&&f(a.name);if("string"===b)g(a.topic,a.token,a.fn,a.once,a.name);else if("array"===b)for(b=a.topic.length;b--;)g(a.topic[b],a.token,a.fn,a.once,a.name);d[a.name]=++l}return this},unsubscribe:function(a){var b=h(a.name);if("string"===b)f(a.name);else if("array"===b)for(b=a.name.length;b--;)f(a.name[b]);return this}}})(window,document);
